<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Universal Header Custom Component</title>
    <link rel="stylesheet" href="styles/css/styles.css" />
  </head>
  <body>
    <div class="cbp-header">
      <div class="cbp-container grid-row">
        <div class="grid-col-auto margin-right-5">
          <img
            class="cbp-logo"
            src="assets/images/cbp-logo-white.svg"
            alt="CBP Logo"
            height="55"
          />
        </div>
        <div class="grid-col-2"><button onClick="showDropdown(this)" class="usa-button cbp-header-dropdown">
          <i class="fas fa-th font-ui-md text-white"></i
            ><span class="cbp-header-text">Card Archetype</span></button>
            <div id="cbpHeaderDropdown" class="dropdown-content">  
              <span class="cbp-header-subtext">Recently Visited Applications</span>       
              <a class="cbp-header-subitem" href="#" target="_blank"><span class="cbp-header-text margin-left-3">Most Recent Application</span></a>
              <a class="cbp-header-subitem" href="#" target="_blank"><span class="cbp-header-text margin-left-3">Next Recent Application</span></a>
              <a class="cbp-header-subitem" href="#" target="_blank"><span class="cbp-header-text margin-left-3">Next Recent Application</span></a>
              <a class="usa-button usa-button--unstyled usa-button--inverse cbp-text-button cbp-margin-2" href="#" target="_blank">View All Apps</a>
            </div>
        </div>

        <div class="grid-col-fill display-flex flex-justify-end">
          <a href="#" class="usa-button usa-button--unstyled margin-right-2">
            <i class="fas fa-comment font-ui-md text-white"></i>
            <span class="cbp-header-text text-right">
              Feedback
            </span>
          </a>
          <div style="position: relative">
            <button onClick="showDropdown(this)" class="usa-button usa-button--unstyled">
              <i class="fas fa-user font-ui-md text-white"></i>
              <span class="cbp-header-text text-right cbp-header-dropdown">
                User Name
              </span>
            </button>
            <!-- @TODO: transfer negative margin-left property into CSS class -->
            <div id="cbpHeaderDropdown2" class="dropdown-content user-profile" style="margin-left:-24px">
              <a class="cbp-header-subitem" href="#" target="_blank"><span class="margin-left-3">Optional Link 1</span></a>
              <a class="cbp-header-subitem" href="#" target="_blank"><span class="margin-left-3">Optional Link 2</span></a>
              <a class="cbp-header-subitem" href="#" target="_blank"><span class="margin-left-3">Optional Link 3</span></a>
              <a class="usa-button usa-button--unstyled cbp-text-button cbp-margin-2" href="#" target="_blank"><span><i class="fas fa-sign-out-alt"></i>Logout</span></a>
            </div>
        </div>
          
      </div>
    </div>

    <script>
      /* When the user clicks on the button, 
      toggle between hiding and showing the dropdown content */
      function showDropdown(a) {
        //document.getElementById("cbpHeaderDropdown").classList.toggle("show");
        a.parentNode.getElementsByClassName("dropdown-content")[0].classList.toggle("show");
      }
      
      // Close the dropdown if the user clicks outside of the menu
      window.onclick = function(event) {
        //the cbp-header-dropdown class is used on the parent of the class 'dropdown content'.
        if (!event.target.matches('.cbp-header-dropdown')) {
          var dropdowns = document.getElementsByClassName("dropdown-content");  
          for (var i = 0; i < dropdowns.length; i++) {
            var openDropdown = dropdowns[i];
            if (openDropdown.classList.contains('show')) {
              openDropdown.classList.remove('show');
            }
          }
        }
      }
      </script>

    <!-- Font Awesome script for icons -->
    <script
      src="https://kit.fontawesome.com/aa019ad450.js"
      crossorigin="anonymous"
    ></script>
    <script src="js/uswds.min.js"></script>
  </body>
</html>
